<!-- 列表 -->
<div class="table-container show-scrollbar" [class.hide]="flat">
  <div #container>
    <table [ngStyle]="{width:(tableWidth+'px')}" *ngIf="!flat">
      <colgroup [width]="tableWidth">
        <col *ngFor="let item of headers" [width]="item.width">
      </colgroup>
      <thead>
        <tr>
          <th *ngFor="let item of headers">
            <div *ngIf="!item.headerTemplate">{{item.name}}</div>
            <div *ngIf="item.headerTemplate">
              <ng-container *ngTemplateOutlet="item.headerTemplate;context: {$implicit: item, header:item, prop:item.prop};">
              </ng-container>
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of list;let index=index;">
          <td *ngFor="let item of headers" [class]="item.css" [ngStyle]="{'max-width':item.width+'px'}">
            <div *ngIf="!item.useTemplate&&!templates[item.prop]" [title]="row[item.prop]||''">{{row[item.prop]||''}}</div>
            <div *ngIf="item.useTemplate||templates[item.prop]">
              <ng-container *ngTemplateOutlet="item.useTemplate||templates[item.prop];context: {$implicit: row, row: row,value:row[item.prop],index:index,prop:item.prop};">
              </ng-container>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- 完全自定义列表 -->
<div class="flat-list-container" *ngIf="flat">
  <div *ngFor="let row of list;let index=index;">
    <ng-container *ngTemplateOutlet="contentTemplates?.first;context: {$implicit:row,row:row,index:index};"></ng-container>
  </div>
</div>
<!-- 分页 -->
<div class="page-navigator" *ngIf="totalSize">
  <div class="page-input">
    <span>{{'__6' | I18N}}</span>
    <input [(ngModel)]="inputPageIndex" (keyup)="inputPageKeyUp($event)">
    <span>{{'__7' | I18N}}</span>
  </div>
  <div class="page-no">
    <span (click)="toPage(pageIndex-1)">
      <i class="fa fa-angle-left"></i>
    </span>
    <span (click)="toPage(pageIndex-4)" *ngIf="pageIndex-4>0">{{pageIndex-4}}</span>
    <span (click)="toPage(pageIndex-3)" *ngIf="pageIndex-3>0">{{pageIndex-3}}</span>
    <span (click)="toPage(pageIndex-2)" *ngIf="pageIndex-2>0">{{pageIndex-2}}</span>
    <span (click)="toPage(pageIndex-1)" *ngIf="pageIndex-1>0">{{pageIndex-1}}</span>
    <span (click)="toPage(pageIndex)" *ngIf="pageIndex>0" class="active">{{pageIndex}}</span>
    <span (click)="toPage(pageIndex+1)" *ngIf="pageIndex+1<pageTotalIndex&&(pageIndex+1!=(pageToalIndex-3))">{{pageIndex+1}}</span>
    <span (click)="toPage(pageIndex+2)" *ngIf="pageIndex+2<pageTotalIndex&&(pageIndex+2!=(pageToalIndex-2))">{{pageIndex+2}}</span>
    <span (click)="toPage(pageIndex+3)" *ngIf="pageIndex+3<pageTotalIndex&&(pageIndex+3!=(pageToalIndex-1))">···</span>
    <span (click)="toPage(pageTotalIndex)" *ngIf="pageIndex!=pageTotalIndex">{{pageTotalIndex}}</span>
    <span (click)="toPage(pageIndex+1)">
      <i class="fa fa-angle-right"></i>
    </span>
  </div>
  <div class="loading" *ngIf="loadingStatus">
    <!-- svgloading -->
    <svg width="30" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg" fill="#fff">
      <circle cx="15" cy="15" r="15">
        <animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"
        />
        <animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"
        />
      </circle>
      <circle cx="60" cy="15" r="9" fill-opacity="0.3">
        <animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"
        />
        <animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"
        />
      </circle>
      <circle cx="105" cy="15" r="15">
        <animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"
        />
        <animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"
        />
      </circle>
    </svg>
  </div>
</div>
<ng-content></ng-content>
<!-- 预定义模板 -->
<ng-template #datetime let-prop="prop" let-value="value">
  <span>{{value|Datetime}}</span>
</ng-template>
<!-- treetable 模板 -->
<ng-template let-item #treetableTmp>
  <div class="node-deep" [ngStyle]="treetableInstance.calcDeepStyle(item)">
    <span class="fa" [class.fa-square-o]="!item.children?.length" [class.fa-plus-square-o]="item.children?.length&&!item.$$expand" [class.fa-minus-square-o]="item.children?.length&&item.$$expand"
      (click)="treetableInstance.expand(item)"></span>
  </div>
</ng-template>
